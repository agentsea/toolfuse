<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>toolfuse.base &mdash; ToolFuse  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ToolFuse
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">â†ª</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://agentsea.github.io/toolfuse.html">Go to User Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ToolFuse</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">toolfuse.base</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for toolfuse.base</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">getdoc</span><span class="p">,</span> <span class="n">getmodule</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">importlib.metadata</span> <span class="kn">import</span> <span class="n">version</span> <span class="k">as</span> <span class="n">pkgversion</span>

<span class="kn">from</span> <span class="nn">toolcore</span> <span class="kn">import</span> <span class="n">FunctionWrapper</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">V1ToolRef</span>


<div class="viewcode-block" id="Action">
<a class="viewcode-back" href="../../api.html#toolfuse.Action">[docs]</a>
<span class="k">class</span> <span class="nc">Action</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an action that an agent can perform in an environment.</span>

<span class="sd">    This class is used to encapsulate information about an action, including its</span>
<span class="sd">    name, the method that implements the action, the schema that defines the</span>
<span class="sd">    structure of the action&#39;s parameters, and a human-readable description of the</span>
<span class="sd">    action.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): The name of the action. This is typically a unique identifier.</span>
<span class="sd">        method (Callable): The callable method that is executed when the action is taken.</span>
<span class="sd">        schema (Dict): A dictionary that defines the structure and types of the parameters</span>
<span class="sd">                       that the action expects.</span>
<span class="sd">        description (str): A human-readable description of what the action does and its</span>
<span class="sd">                           purpose within the context of the agent&#39;s environment.</span>

<span class="sd">    Methods:</span>
<span class="sd">        __call__(*args, **kwargs) -&gt; Any:</span>
<span class="sd">            Allows the Action instance to be called like a function, which will in turn</span>
<span class="sd">            call the method associated with this action, passing through any arguments</span>
<span class="sd">            and keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the Action class.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the action.</span>
<span class="sd">            method (Callable): The callable method that implements the action.</span>
<span class="sd">            schema (Dict): The schema defining the structure of the action&#39;s parameters.</span>
<span class="sd">            description (str): A description of the action.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>

<div class="viewcode-block" id="Action.__call__">
<a class="viewcode-back" href="../../api.html#toolfuse.Action.__call__">[docs]</a>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes the action&#39;s method with the given arguments and keyword arguments.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Variable length argument list.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The result of the action method execution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Observation">
<a class="viewcode-back" href="../../api.html#toolfuse.Observation">[docs]</a>
<span class="k">class</span> <span class="nc">Observation</span><span class="p">(</span><span class="n">Action</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an observation that an agent can make in an environment.</span>

<span class="sd">    This class is used to encapsulate information about an observation, including its</span>
<span class="sd">    name, the method that implements the observation, the schema that defines the</span>
<span class="sd">    structure of the observation&#39;s data, and a human-readable description of the</span>
<span class="sd">    observation.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): The name of the observation. This is typically a unique identifier.</span>
<span class="sd">        method (Callable): The callable method that is executed to obtain the observation.</span>
<span class="sd">        schema (Dict): A dictionary that defines the structure and types of the data</span>
<span class="sd">                       that the observation returns.</span>
<span class="sd">        description (str): A human-readable description of what the observation represents</span>
<span class="sd">                           and its purpose within the context of the agent&#39;s environment.</span>

<span class="sd">    Methods:</span>
<span class="sd">        __call__(*args, **kwargs) -&gt; Any:</span>
<span class="sd">            Allows the Observation instance to be called like a function, which will in turn</span>
<span class="sd">            call the method associated with this observation, passing through any arguments</span>
<span class="sd">            and keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the Observation class.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the observation.</span>
<span class="sd">            method (Callable): The callable method that implements the observation.</span>
<span class="sd">            schema (Dict): The schema defining the structure of the observation&#39;s data.</span>
<span class="sd">            description (str): A description of the observation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>

<div class="viewcode-block" id="Observation.__call__">
<a class="viewcode-back" href="../../api.html#toolfuse.Observation.__call__">[docs]</a>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes the observation&#39;s method with the given arguments and keyword arguments.</span>

<span class="sd">        This method allows the observation to be obtained in a manner similar to calling</span>
<span class="sd">        a function, with the observation&#39;s method determining the exact data returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            *args: Variable length argument list.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The result of the observation method execution, typically data about the</span>
<span class="sd">            environment or the agent&#39;s state within it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="action">
<a class="viewcode-back" href="../../api.html#toolfuse.action">[docs]</a>
<span class="k">def</span> <span class="nf">action</span><span class="p">(</span><span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A decorator that marks a method as an action within the Tool.</span>

<span class="sd">    This decorator adds a special attribute to the method indicating that it</span>
<span class="sd">    should be treated as an action. Actions are potential operations that an</span>
<span class="sd">    agent can perform in its environment.</span>

<span class="sd">    Args:</span>
<span class="sd">        method (Callable): The method to be marked as an action.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Callable: The original method with the added &#39;_is_action&#39; attribute.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method</span><span class="o">.</span><span class="n">_is_action</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># type: ignore</span>
    <span class="k">return</span> <span class="n">method</span></div>



<div class="viewcode-block" id="observation">
<a class="viewcode-back" href="../../api.html#toolfuse.observation">[docs]</a>
<span class="k">def</span> <span class="nf">observation</span><span class="p">(</span><span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A decorator that marks a method as an observation within the Tool.</span>

<span class="sd">    This decorator adds a special attribute to the method indicating that it</span>
<span class="sd">    should be treated as an observation. Observations are pieces of information</span>
<span class="sd">    that an agent can gather from its environment to inform its decision-making</span>
<span class="sd">    process.</span>

<span class="sd">    Args:</span>
<span class="sd">        method (Callable): The method to be marked as an observation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Callable: The original method with the added &#39;_is_observation&#39; attribute.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">method</span><span class="o">.</span><span class="n">_is_observation</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># type: ignore</span>
    <span class="k">return</span> <span class="n">method</span></div>



<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="Tool">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool">[docs]</a>
<span class="k">class</span> <span class="nc">Tool</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Tool is an abstract base class that defines the interface for agent tools.</span>

<span class="sd">    Agent tools are the primary means by which an agent interacts with its environment.</span>
<span class="sd">    They encapsulate actions that an agent can perform and observations that an agent</span>
<span class="sd">    can make to understand the state of the environment. This class provides the necessary</span>
<span class="sd">    infrastructure for registering and managing these actions and observations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the Tool class, setting up the lists for actions and observations</span>
<span class="sd">        and registering the methods defined in the subclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Action</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_observations_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Observation</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_register_methods</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_register_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Scans the Tool instance for methods marked as actions or observations and registers them.</span>

<span class="sd">        This method looks for callable attributes of the instance that have either the &#39;_is_action&#39;</span>
<span class="sd">        or &#39;_is_observation&#39; attribute set to True, indicating that they should be treated as actions</span>
<span class="sd">        or observations, respectively. It then creates Action or Observation instances for these methods</span>
<span class="sd">        and adds them to the appropriate list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">attr_name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="s2">&quot;_is_action&quot;</span><span class="p">):</span>
                <span class="n">wrapper</span> <span class="o">=</span> <span class="n">FunctionWrapper</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="s2">&quot;_is_observation&quot;</span><span class="p">):</span>
                <span class="n">wrapper</span> <span class="o">=</span> <span class="n">FunctionWrapper</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
                <span class="n">observation</span> <span class="o">=</span> <span class="n">Observation</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_observations_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">observation</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_parse_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the first sentence from a method&#39;s docstring to use as a description.</span>

<span class="sd">        Args:</span>
<span class="sd">            method (Callable): The method from which to extract the docstring.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The first sentence of the method&#39;s docstring, if available. Otherwise, an empty string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">docstring</span> <span class="o">=</span> <span class="n">getdoc</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">docstring</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\.\s+&quot;</span><span class="p">,</span> <span class="n">docstring</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

<div class="viewcode-block" id="Tool.actions">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.actions">[docs]</a>
    <span class="k">def</span> <span class="nf">actions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Action</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all registered actions that the agent can take.</span>

<span class="sd">        Each action represents a potential operation that the agent can perform in its environment.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Action]: A list of Action instances representing the available actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span></div>


<div class="viewcode-block" id="Tool.observations">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.observations">[docs]</a>
    <span class="k">def</span> <span class="nf">observations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Observation</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all registered observations that the agent can make.</span>

<span class="sd">        Each observation represents a piece of information that the agent can gather from its environment</span>
<span class="sd">        to inform its decision-making process.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Observation]: A list of Observation instances representing the available observations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_observations_list</span></div>


<div class="viewcode-block" id="Tool.use">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.use">[docs]</a>
    <span class="k">def</span> <span class="nf">use</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes an action with the provided arguments and keyword arguments.</span>

<span class="sd">        Args:</span>
<span class="sd">            action (Action): The Action instance representing the action to perform.</span>
<span class="sd">            *args: Variable length argument list for the action.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments for the action.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The result of the action execution, which can vary depending on the action.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">action</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tool.observe">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.observe">[docs]</a>
    <span class="k">def</span> <span class="nf">observe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observation</span><span class="p">:</span> <span class="n">Observation</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes an observation with the provided arguments and keyword arguments.</span>

<span class="sd">        Args:</span>
<span class="sd">            observation (Observation): The Observation instance representing the observation to run.</span>
<span class="sd">            *args: Variable length argument list for the observation.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments for the observation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The result of the observation execution, which can vary depending on the observation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">observation</span><span class="p">,</span> <span class="n">Observation</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Actions are not observable. Use the &#39;use&#39; method to perform an action.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">observation</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tool.json_schema">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.json_schema">[docs]</a>
    <span class="k">def</span> <span class="nf">json_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">actions_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">exclude_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of JSON schemas representing the tool&#39;s actions and, optionally, observations,</span>
<span class="sd">        excluding any actions or observations with names listed in &#39;exclude_names&#39;.</span>

<span class="sd">        Each schema provides a structured description of an action&#39;s or observation&#39;s interface, including its name,</span>
<span class="sd">        expected arguments, and other metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            actions_only (bool, optional): If True, only the action schemas will be returned. Defaults to False.</span>
<span class="sd">            exclude_names (List[str], optional): A list of action or observation names to exclude from the schema output.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Dict[str, Any]]: A list of dictionaries, each representing the JSON schema of an action or observation not excluded.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_names</span><span class="p">:</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">actions_only</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">observation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">observations</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">observation</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_names</span><span class="p">:</span>
                    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">observation</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span></div>


<div class="viewcode-block" id="Tool.find_action">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.find_action">[docs]</a>
    <span class="k">def</span> <span class="nf">find_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Action</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for an action or observation by name and returns it if found.</span>

<span class="sd">        This method checks both the actions and observations lists for a match.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the action or observation to find.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Action]: The Action or Observation instance with the matching name, or None if not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">action</span>

        <span class="k">for</span> <span class="n">observation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">observations</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">observation</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">observation</span></div>


<div class="viewcode-block" id="Tool.close">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A method that should be implemented by subclasses to handle the closing of the tool.</span>

<span class="sd">        This method is intended to provide a way to release any resources or perform any cleanup necessary</span>
<span class="sd">        when the tool is no longer needed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Tool.context">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.context">[docs]</a>
    <span class="k">def</span> <span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;LLM context fork the tool</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: LLM context for the tool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__doc__</span>  <span class="c1"># type: ignore</span></div>


<div class="viewcode-block" id="Tool.name">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.name">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tool name</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Tool name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span></div>


<div class="viewcode-block" id="Tool.ref">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.ref">[docs]</a>
    <span class="k">def</span> <span class="nf">ref</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">V1ToolRef</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tool reference&quot;&quot;&quot;</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">getmodule</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">module</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Tool not associated with a module&quot;</span><span class="p">)</span>
        <span class="n">mod_parts</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">pkgversion</span><span class="p">(</span><span class="n">mod_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">V1ToolRef</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tool.add_action">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.add_action">[docs]</a>
    <span class="k">def</span> <span class="nf">add_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new action to the tool using only the method provided. Name, schema,</span>
<span class="sd">        and description are derived automatically.</span>

<span class="sd">        Args:</span>
<span class="sd">            method (Callable): The callable method that implements the action.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_schema</span><span class="p">(</span>
            <span class="n">method</span>
        <span class="p">)</span>  <span class="c1"># Assuming a method to generate schema automatically</span>
        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

        <span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tool.add_observation">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.add_observation">[docs]</a>
    <span class="k">def</span> <span class="nf">add_observation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new observation to the tool using only the method provided. Name, schema,</span>
<span class="sd">        and description are derived automatically.</span>

<span class="sd">        Args:</span>
<span class="sd">            method (Callable): The callable method that implements the observation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_schema</span><span class="p">(</span>
            <span class="n">method</span>
        <span class="p">)</span>  <span class="c1"># Assuming a method to generate schema automatically</span>
        <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

        <span class="n">observation</span> <span class="o">=</span> <span class="n">Observation</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_observations_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">observation</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_generate_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a schema based on the method signature. This can be as simple or as</span>
<span class="sd">        complex as needed depending on how parameters are to be handled.</span>

<span class="sd">        Args:</span>
<span class="sd">            method (Callable): The method for which to generate a schema.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: A schema representing the parameters and their types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Example implementation using inspect to generate parameter types</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">method</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">param</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ptype</span><span class="o">.</span><span class="n">annotation</span><span class="p">)</span> <span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">ptype</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

<div class="viewcode-block" id="Tool.add_actions">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.add_actions">[docs]</a>
    <span class="k">def</span> <span class="nf">add_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">methods</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds multiple actions to the tool using a list of methods. Each method&#39;s name, schema,</span>
<span class="sd">        and description are derived automatically.</span>

<span class="sd">        Args:</span>
<span class="sd">            methods (List[Callable]): A list of callable methods that implement actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">methods</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">method</span><span class="p">)</span></div>


<div class="viewcode-block" id="Tool.add_observations">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.add_observations">[docs]</a>
    <span class="k">def</span> <span class="nf">add_observations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">methods</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds multiple observations to the tool using a list of methods. Each method&#39;s name, schema,</span>
<span class="sd">        and description are derived automatically.</span>

<span class="sd">        Args:</span>
<span class="sd">            methods (List[Callable]): A list of callable methods that implement observations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">methods</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_observation</span><span class="p">(</span><span class="n">method</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_add_action</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new action to the tool using the provided method.</span>
<span class="sd">        If the action with the same name already exists, it won&#39;t add it again.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span> <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span><span class="p">):</span>
            <span class="k">return</span>  <span class="c1"># Prevent duplicate actions</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">or</span> <span class="p">{},</span> <span class="n">description</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_observation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new observation to the tool using the provided method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">obs</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span> <span class="k">for</span> <span class="n">obs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_observations_list</span><span class="p">):</span>
            <span class="k">return</span>  <span class="c1"># Prevent duplicate observations</span>
        <span class="n">observation</span> <span class="o">=</span> <span class="n">Observation</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">schema</span> <span class="ow">or</span> <span class="p">{},</span> <span class="n">description</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_observations_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">observation</span><span class="p">)</span>

<div class="viewcode-block" id="Tool.merge">
<a class="viewcode-back" href="../../api.html#toolfuse.Tool.merge">[docs]</a>
    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;Tool&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merges the actions and observations from another tool into this tool.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Tool): The tool to merge into this tool.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">actions</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_action</span><span class="p">(</span>
                <span class="n">action</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">description</span>
            <span class="p">)</span>
        <span class="k">for</span> <span class="n">observation</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">observations</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_observation</span><span class="p">(</span>
                <span class="n">observation</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
                <span class="n">observation</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">observation</span><span class="o">.</span><span class="n">schema</span><span class="p">,</span>
                <span class="n">observation</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
            <span class="p">)</span></div>
</div>



<span class="k">def</span> <span class="nf">tool_from_cls</span><span class="p">(</span><span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">Tool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically creates a subclass of `Tool` that integrates methods from a given class `cls` as actions.</span>

<span class="sd">    Args:</span>
<span class="sd">        cls (Type[T]): The class from which to create a Tool, integrating its methods as actions.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Type[Tool]: A new subclass of Tool that includes actions derived from `cls` methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Combined</span><span class="p">(</span><span class="n">Tool</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A combined class that inherits from both Tool and a user-defined class (cls).</span>

<span class="sd">        This class is dynamically created to combine the functionality of a user-defined class</span>
<span class="sd">        with the Tool class, allowing methods from the user-defined class to be registered as actions</span>
<span class="sd">        within the Tool framework. It initializes both parent classes and registers the user-defined</span>
<span class="sd">        class&#39;s methods as actions.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            Inherits all attributes from the Tool class and the user-defined class (cls).</span>

<span class="sd">        Methods:</span>
<span class="sd">            __init__(*args, **kwargs): Initializes the Combined class, the Tool part of the class,</span>
<span class="sd">                                       and registers methods from the user-defined class as actions.</span>
<span class="sd">            name(): Returns the name of the class.</span>
<span class="sd">            _register_methods_from_cls(): Registers public methods from the user-defined class as actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Initializes the Combined class by initializing both the user-defined class part and the Tool class part.</span>
<span class="sd">            It also registers the methods from the user-defined class (cls) as actions within the Tool framework.</span>

<span class="sd">            Args:</span>
<span class="sd">                *args: Variable length argument list passed to the user-defined class initializer.</span>
<span class="sd">                **kwargs: Arbitrary keyword arguments passed to the user-defined class initializer.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="bp">cls</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>  <span class="c1"># type: ignore</span>
            <span class="p">)</span>  <span class="c1"># Initialize the user-defined part of the combined class</span>
            <span class="n">Tool</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># Initialize the Tool part of the combined class</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_register_methods_from_cls</span><span class="p">()</span>  <span class="c1"># Register methods from cls as actions</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns the name of the class.</span>

<span class="sd">            Returns:</span>
<span class="sd">                str: The name of the class.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span>

        <span class="k">def</span> <span class="nf">_register_methods_from_cls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Registers all public methods from the user-defined class (cls) as actions.</span>

<span class="sd">            This method iterates over all public methods of cls and registers them as actions,</span>
<span class="sd">            allowing them to be utilized within the Tool framework.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">):</span>
                <span class="c1"># Skip private and protected methods, skip methods from Tool or object class</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">Tool</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
                <span class="p">):</span>
                    <span class="k">continue</span>

                <span class="c1"># Wrap the method to get its schema</span>
                <span class="n">wrapper</span> <span class="o">=</span> <span class="n">FunctionWrapper</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

                <span class="c1"># Use the existing method to create a description based on the method&#39;s docstring</span>
                <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

                <span class="c1"># Use the schema generated by FunctionWrapper</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">schema</span>

                <span class="c1"># Create an Action instance for the method</span>
                <span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

                <span class="c1"># Add the Action to the tool&#39;s actions list</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="n">Combined</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">Tool&quot;</span>
    <span class="k">return</span> <span class="n">Combined</span>


<span class="k">def</span> <span class="nf">tool_from_function</span><span class="p">(</span><span class="n">function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">Tool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically creates a subclass of `Tool` that encapsulates a given function as an action.</span>

<span class="sd">    Args:</span>
<span class="sd">        function (Callable): The function to be encapsulated as an action in the Tool.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Type[Tool]: A new subclass of Tool that includes the given function as an action.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">FunctionTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A subclass of `Tool` designed to encapsulate a single function as an actionable method within the Tool framework.</span>

<span class="sd">        This class takes a function upon initialization and registers it as an action, making it callable within the context of the Tool&#39;s environment. The primary purpose of this class is to allow standalone functions to be seamlessly integrated into the Tool framework, providing a straightforward way to extend functionality with custom actions.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            function (Callable): The function that is encapsulated as an action within the Tool.</span>

<span class="sd">        Methods:</span>
<span class="sd">            __init__(self, function: Callable): Initializes a new instance of the FunctionTool class, registering the provided function as an action.</span>
<span class="sd">            _register_function_as_action(self, function: Callable): Registers the provided function as an action for the Tool.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Initializes a new instance of the FunctionTool class.</span>

<span class="sd">            This constructor method takes a function as an argument and calls the internal method to register it as an action within the Tool.</span>

<span class="sd">            Args:</span>
<span class="sd">                function (Callable): The function to be encapsulated as an action in the Tool.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_register_function_as_action</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">_register_function_as_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Registers the provided function as an action for the Tool.</span>

<span class="sd">            This method wraps the given function to extract its schema and documentation, creating an Action instance that encapsulates the function. This allows the function to be called as an action within the Tool&#39;s environment.</span>

<span class="sd">            Args:</span>
<span class="sd">                function (Callable): The function to be registered as an action.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Wrap the function to get its schema</span>
            <span class="n">wrapper</span> <span class="o">=</span> <span class="n">FunctionWrapper</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>

            <span class="c1"># Generate a description from the function&#39;s docstring</span>
            <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>

            <span class="c1"># Use the schema generated by FunctionWrapper</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">schema</span>

            <span class="c1"># Extract the name of the function to use as the action name</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="vm">__name__</span>

            <span class="c1"># Create an Action instance for the function</span>
            <span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

            <span class="c1"># Add the Action to the tool&#39;s actions list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="n">FunctionTool</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">_tool&quot;</span>
    <span class="k">return</span> <span class="n">FunctionTool</span>


<span class="k">def</span> <span class="nf">tool_from_object</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically creates a subclass of `Tool` that encapsulates the methods of a given object instance as actions.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj (Any): The object instance whose methods are to be encapsulated as actions in the Tool.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tool: A new subclass of Tool that includes the object&#39;s methods as actions.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">ObjectTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A subclass of `Tool` that encapsulates the methods of a given object instance as actions.</span>

<span class="sd">        This class dynamically creates actions based on the public methods of the provided object instance. Each method is wrapped as an `Action` object, allowing it to be invoked within the Tool&#39;s environment.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            obj_instance (Any): The object instance whose methods are to be encapsulated as actions.</span>

<span class="sd">        Methods:</span>
<span class="sd">            __init__(self, obj_instance: Any): Initializes a new instance of `ObjectTool` with the given object.</span>
<span class="sd">            _register_methods_from_object(self): Registers all public methods of `obj_instance` as actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_instance</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Initializes a new instance of `ObjectTool`.</span>

<span class="sd">            This constructor method takes an object instance as an argument and calls the internal method to register its public methods as actions within the Tool.</span>

<span class="sd">            Args:</span>
<span class="sd">                obj_instance (Any): The object instance whose methods are to be encapsulated as actions.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_instance</span> <span class="o">=</span> <span class="n">obj_instance</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_register_methods_from_object</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">_register_methods_from_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Registers all public methods of the object instance as actions for the Tool.</span>

<span class="sd">            This method iterates over all public methods of the provided object instance, excluding private, protected, and dunder methods. Each method is wrapped as an `Action` object and added to the tool&#39;s actions list.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_instance</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span>
            <span class="p">):</span>
                <span class="c1"># Skip private and protected methods, and skip dunder methods</span>
                <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="c1"># Skip methods not defined in the class of obj_instance (e.g., inherited from object)</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">method</span><span class="o">.</span><span class="vm">__func__</span><span class="p">)</span> <span class="o">!=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">obj_instance</span><span class="o">.</span><span class="vm">__class__</span>
                <span class="p">):</span>
                    <span class="k">continue</span>

                <span class="c1"># Wrap the method to get its schema</span>
                <span class="n">wrapper</span> <span class="o">=</span> <span class="n">FunctionWrapper</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

                <span class="c1"># Generate a description from the method&#39;s docstring</span>
                <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_docstring</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

                <span class="c1"># Use the schema generated by FunctionWrapper</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">schema</span>

                <span class="c1"># Create an Action instance for the method</span>
                <span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

                <span class="c1"># Add the Action to the tool&#39;s actions list</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_actions_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="n">ObjectTool</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">Tool&quot;</span>
    <span class="c1"># Return an instance of ObjectTool instead of the class itself, as we need to pass the object instance to it</span>
    <span class="k">return</span> <span class="n">ObjectTool</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  <span class="c1"># type: ignore</span>


<span class="k">def</span> <span class="nf">tool</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Tool</span><span class="p">],</span> <span class="n">Tool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dynamically creates a Tool instance or class based on the type of the input.</span>

<span class="sd">    This function determines whether the input is a class, a function, or an object instance</span>
<span class="sd">    and then calls the appropriate tool creation function (`tool_from_cls`, `tool_from_function`,</span>
<span class="sd">    or `tool_from_object`).</span>

<span class="sd">    Args:</span>
<span class="sd">        input (Union[Type, Callable, Any]): The input for which to create a Tool. This can be</span>
<span class="sd">                                            a class, a function, or an object instance.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Union[Type[Tool], Tool]: A Tool class if the input is a class or function, or a Tool</span>
<span class="sd">                                 instance if the input is an object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="c1"># Input is a class, so we use tool_from_cls</span>
        <span class="k">return</span> <span class="n">tool_from_cls</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="c1"># Input is a function, so we use tool_from_function</span>
        <span class="k">return</span> <span class="n">tool_from_function</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Assume the input is an object instance, so we use tool_from_object</span>
        <span class="k">return</span> <span class="n">tool_from_object</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Kentauros AI.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>